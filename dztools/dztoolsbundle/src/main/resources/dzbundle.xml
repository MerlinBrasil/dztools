<assembly
	xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.2 http://maven.apache.org/xsd/assembly-1.1.2.xsd">
	<id>dzbundle</id>
	<formats>
		<format>dir</format>
		<format>zip</format>
	</formats>
	<includeBaseDirectory>false</includeBaseDirectory>

	<moduleSets>
		<moduleSet>
			<useAllReactorProjects>true</useAllReactorProjects>
			<includes>
				<include>com.jforex:dzplugin</include>
			</includes>
			<sources>
				<includeModuleDirectory>false</includeModuleDirectory>
				<fileSets>
					<fileSet>
						<directory>target/nar/dzplugin-${project.version}-x86-Windows-gpp-shared/lib/x86-Windows-gpp/shared</directory>
						<outputDirectory>Plugin</outputDirectory>
						<includes>
							<include>dukascopy-${project.version}.dll</include>
						</includes>
					</fileSet>
					<fileSet>
						<directory>target</directory>
						<outputDirectory>Plugin/${assemblyName}</outputDirectory>
						<includes>
							<include>dzplugin-${project.version}.jar</include>
						</includes>
					</fileSet>
					<fileSet>
						<directory>src/main/resources</directory>
						<outputDirectory>Plugin/${assemblyName}</outputDirectory>
						<includes>
							<include>DZPluginConfig.properties</include>
						</includes>
					</fileSet>
					<fileSet>
						<filtered>true</filtered>
						<directory>src/main/resources</directory>
						<outputDirectory>Strategy</outputDirectory>
						<includes>
							<include>DukascopyDownload.c</include>
						</includes>
					</fileSet>
					<fileSet>
						<directory>src/main/resources</directory>
						<outputDirectory>Plugin/${assemblyName}/logs</outputDirectory>
						<excludes>
							<exclude>*</exclude>
						</excludes>
					</fileSet>
					<fileSet>
						<directory>src/main/resources</directory>
						<outputDirectory>Plugin/${assemblyName}</outputDirectory>
						<includes>
							<include>log4j2.xml</include>
							<include>log4j.properties</include>
						</includes>
					</fileSet>
				</fileSets>
			</sources>
		</moduleSet>
	</moduleSets>

	<dependencySets>
		<dependencySet>
			<outputDirectory>Plugin/${assemblyName}/lib</outputDirectory>
			<excludes>
				<exclude>com.jforex:dzplugin</exclude>
				<exclude>com.jforex:dztoolsbundle</exclude>
			</excludes>
		</dependencySet>
	</dependencySets>
</assembly>